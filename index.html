<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Calendario de Adviento 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: "Courier New", monospace;
    padding: 0;
  }

  /* Intro */
  #intro {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
  }
  #intro h1 {
    font-size: 28px;
    margin-bottom: 20px;
    font-weight: 300;
  }
  #intro p {
    font-size: 18px;
  }
  .cursor {
    display: inline-block;
    width: 10px;
    background: #fff;
    margin-left: 4px;
    animation: blink 0.8s infinite;
    vertical-align: middle;
    height: 22px;
  }
  @keyframes blink { 50% { opacity: 0; } }

  /* Loading */
  #loading {
    position: fixed;
    inset: 0;
    background: #000;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  #loading p {
    margin-bottom: 20px;
    font-size: 20px;
  }
  .loading-box {
    width: 350px;
    height: 35px;
    display: flex;
    gap: 2px;
    border: 2px solid #fff;
    padding: 2px;
    box-sizing: border-box;
    overflow: hidden;
  }
  .segment {
    flex: 1;
    background: #000;
    border: 1px solid #fff;
    transition: background 0.2s;
  }
  .loading-box.fill .segment {
    animation: fillSegment 0.3s forwards;
  }
  .loading-box.fill .segment:nth-child(1)  { animation-delay: 0s; }
  .loading-box.fill .segment:nth-child(2)  { animation-delay: 0.15s; }
  .loading-box.fill .segment:nth-child(3)  { animation-delay: 0.3s; }
  .loading-box.fill .segment:nth-child(4)  { animation-delay: 0.45s; }
  .loading-box.fill .segment:nth-child(5)  { animation-delay: 0.6s; }
  .loading-box.fill .segment:nth-child(6)  { animation-delay: 0.75s; }
  .loading-box.fill .segment:nth-child(7)  { animation-delay: 0.9s; }
  .loading-box.fill .segment:nth-child(8)  { animation-delay: 1.05s; }
  .loading-box.fill .segment:nth-child(9)  { animation-delay: 1.2s; }
  .loading-box.fill .segment:nth-child(10) { animation-delay: 1.35s; }
  .loading-box.fill .segment:nth-child(11) { animation-delay: 1.5s; }
  .loading-box.fill .segment:nth-child(12) { animation-delay: 1.65s; }
  .loading-box.fill .segment:nth-child(13) { animation-delay: 1.8s; }
  .loading-box.fill .segment:nth-child(14) { animation-delay: 1.95s; }
  .loading-box.fill .segment:nth-child(15) { animation-delay: 2.1s; }
  .loading-box.fill .segment:nth-child(16) { animation-delay: 2.25s; }
  .loading-box.fill .segment:nth-child(17) { animation-delay: 2.4s; }
  .loading-box.fill .segment:nth-child(18) { animation-delay: 2.55s; }
  .loading-box.fill .segment:nth-child(19) { animation-delay: 2.7s; }
  .loading-box.fill .segment:nth-child(20) { animation-delay: 2.85s; }

  @keyframes fillSegment {
    0% { background: #000; }
    100% { background: #fff; }
  }

  /* Calendar */
  .calendar {
    display: none;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    max-width: 600px;
    margin: 40px auto;
  }
  @media (max-width: 720px) { .calendar { grid-template-columns: repeat(3, 1fr); } }
  @media (max-width: 480px) { .calendar { grid-template-columns: repeat(2, 1fr); } }

  .door { perspective: 600px; }
  .day {
    width: 100%;
    padding-top: 100%;
    position: relative;
    border: 1px dashed #fff;
    cursor: pointer;
    color: #fff;
    transform-origin: left center;
    transition: transform 0.6s ease;
    backface-visibility: hidden;
  }
  .day span { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; }
  .day.locked { cursor: pointer; }
  .day.open { transform: rotateY(-120deg); }

  /* Modal */
  #modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.92);
    display: none;
    padding: 40px;
    overflow-y: auto;
  }
  #modalContent {
    width: 90%;
    max-width: 600px;
    margin: 0 auto;
    white-space: normal;
    font-family: "Courier New", monospace;
    color: #fff;
    text-align: justify;
    word-wrap: break-word;
  }
  #modalContent img, 
  #modalContent video, 
  #modalContent iframe {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 20px 0;
  }
  .close {
    display: block;
    margin: 60px auto 0;
    padding: 10px 20px;
    border: 1px dashed #fff;
    cursor: pointer;
    width: fit-content;
    text-align: center;
    text-decoration: none;
  }
</style>
</head>
<body>

<div id="intro">
  <h1>--- BIENVENIDA AL CALENDARIO DE ADVIENTO ---</h1>
  <p>Presiona ENTER o haz clic para continuar<span class="cursor"></span></p>
</div>

<div id="loading">
  <p>loading...</p>
  <div class="loading-box">
    <!-- 20 segmentos -->
    <div class="segment"></div><div class="segment"></div><div class="segment"></div><div class="segment"></div>
    <div class="segment"></div><div class="segment"></div><div class="segment"></div><div class="segment"></div>
    <div class="segment"></div><div class="segment"></div><div class="segment"></div><div class="segment"></div>
    <div class="segment"></div><div class="segment"></div><div class="segment"></div><div class="segment"></div>
    <div class="segment"></div><div class="segment"></div><div class="segment"></div><div class="segment"></div>
  </div>
</div>

<div class="calendar" id="calendar"></div>

<div id="modal">
  <div id="modalContent"></div>
  <div class="close" onclick="closeModal()">--- volver al calendario ---</div>
</div>

<script>
const dataHTML = {
  1: `
    <p>No sé en qué momento pasamos del calendario de adviento de ventanitas de cartulina con figuras de chocolate al de cajitas de cartón con pequeños regalos. No sé si tuvo que ver con que yo empezara a ver el chocolate de otra manera, o si simplemente fue una idea de algún tiktok, o si la tía Fina nos dio las cajas, o si quizá fue una confluencia de todos esos factores. Quizá a veces las cosas que suceden no son más que eso, una confluencia de eventos, pero el caso es que pasamos de las ventanitas de cartulina a las cajitas de cartón.</p>
    <p>Este año, quizá porque con la mudanza las cajas terminaron en la basura, quizá porque la vida a veces nos atropella, quizá porque ni siquiera se nos había ocurrido, o quizá, de nuevo, por una confluencia de todo ello, no habrá calendario de cajitas de cartón ni de ventanitas de cartulina. Mientras tanto, las luces de las calles siguen encendidas, y el bloque de la esquina ya está adornado con árboles de Navidad idénticos con sus idénticas estrellas. El balcón del cuarto tercera mantiene el mismo aspecto de siempre, salvo quizá alguna decoración un poco hortera que apenas se nota desde la calle. Y, sin embargo, parece que todo ha cambiado.</p>
    <p>Así que este año he decidido hacer un calendario digital. He codificado un poquito de html (Google Gemini te como la boca) y no sé si funcionará a la perfección, pero mi idea es que cada día aparezca un texto, una imagen, un vídeo o un audio. Lo iré construyendo un poco sobre la marcha, pero creo que puede quedar bonito y alegrarnos un poco cada día.</p>
    <p>Os quiero mucho. Un abrazo,</p>
    <p>Paula.</p>
  `,
  2: `
    <p>Hoy os dejo esta joyita un poco más divertida que sinó mama llora:</p>
    <video src="videos/aramsamsam.mp4" controls></video>
  `,
  3: `<p>Dicen que nuestros cuerpos reemplazan regularmente a muchas de las casi 30 billones de células que nos forman. Los glóbulos rojos se sustituyen cada cuatro meses, los glóbulos blancos pueden durar hasta un año, las células del intestino se renuevan cada cuatro días y las de las pestañas se regeneran aproximadamente cada dos meses.</p>

<p>Millones de células mueren y nacen en nuestro cuerpo en un ciclo que me parece casi poético. Cada segundo morimos y nacemos un poco en un baile silencioso y constante que nos mantiene en equilibrio. Es raro y frágil y bonito a la vez estar formados por un flujo de principios y finales que se encadenan con cada respiración, como una coreografía de una canción que comienza y termina y se repite con el ritmo de cada latido. Bum bum, bum bum.</p>

<p>Dicen que las células de la piel se regeneran cada 28 días. Esto significa que he habitado más de 282 pieles distintas. Esto significa que si desde el 6 de agosto de 1976 han pasado 18 017 días, mamá está a mitad de camino de su piel número 643. Esto significa que si desde el 15 de octubre de 2006 han pasado 6 990 días, Elsa está a punto de estrenar su piel número 250; y que si han pasado 6 146 días desde el 5 de febrero de 2009, Ana vive ahora en su piel 219.</p>

<p>Dicen también que existen células de nuestro cuerpo que nos acompañan toda la vida. Algunas neuronas del cerebro, alguna célula de los ojos y del corazón. Las que han visto y oído y recordado y amado. Quizás por eso, aunque el cuerpo se renueve sin descanso, hay cosas que permanecen. El sonido inconfundible de unas pisadas por el pasillo, un ritmo de respiración familiar, una risa característica, una cierta forma de mirar y hablar y abrazar: entre tantos ciclos de principios y finales, un algo o un alguien que sigue siendo hogar.</p>`,
  4: `4: `<audio controls>
  <source src="audio/caballito.mp3" type="audio/mpeg">
</audio>`,

  24: `<p>Feliz día 24</p>`
};

const today = new Date().getDate();
const cal = document.getElementById('calendar');
let activeDay = null;

function formatDate(day) {
  return `${day} de Diciembre`;
}

for (let i = 1; i <= 24; i++) {
  const door = document.createElement('div');
  door.className = 'door';
  const btn = document.createElement('div');
  btn.className = 'day';
  const span = document.createElement('span');
  span.textContent = i;
  btn.appendChild(span);

  if (i > today) {
    btn.classList.add('locked');
    btn.addEventListener('click', () => {
      openModalMessage("No seas tan impaciente chochoo");
    });
  } else {
    btn.addEventListener('click', () => {
      btn.classList.add('open');
      activeDay = btn;
      setTimeout(() => openModalContent(i), 500);
    });
  }

  door.appendChild(btn);
  cal.appendChild(door);
}

function openModalContent(day) {
  document.getElementById('modalContent').innerHTML =
    `<p style="text-align:left; margin-bottom:20px; font-weight: normal;">${formatDate(day)}</p>` +
    dataHTML[day];
  document.getElementById('modal').style.display = 'block';
}

function openModalMessage(msg) {
  document.getElementById('modalContent').innerHTML = `<p>${msg}</p>`;
  document.getElementById('modal').style.display = 'block';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
  if(activeDay) activeDay.classList.remove('open');
  activeDay = null;
}

function startCalendar() {
  document.getElementById('intro').style.display = 'none';
  const loading = document.getElementById('loading');
  loading.style.display = 'flex';
  const box = document.querySelector('.loading-box');
  box.classList.add('fill');

  setTimeout(() => {
    loading.style.display = 'none';
    document.getElementById('calendar').style.display = 'grid';
    box.classList.remove('fill');
  }, 3200);
}

document.getElementById('intro').addEventListener('click', startCalendar);
window.addEventListener('keydown', e => { if(e.key === 'Enter') startCalendar(); });
window.addEventListener('keydown', e => { if(e.key === 'Escape') closeModal(); });
document.getElementById('modal').addEventListener('click', e => { if(e.target.id === 'modal') closeModal(); });
</script>

</body>
</html>
